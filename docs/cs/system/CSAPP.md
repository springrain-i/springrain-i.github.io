!!! abstract
    本笔记参考《深入理解计算机系统》与《CSAPP》
    章节参考原书表示
    从2.3章节后主要使用英文记录
## 1.计算机系统漫游

* 三种数字表示:
  * 无符号
  * 补码（表示有符号的数字）
  * 浮点数
* 溢出(overflow): 
  * 乘法的结合律是可行的:$200*300*400*500 = -884907888$
  * 浮点运算是不可结合的:eg:$(3.14+1e20)-1e20 = 0.0$而$3.14+(1e20-1e20) = 3.14$
## 2.信息的表示和处理

### 2.1 信息储存

* **虚拟内存(virtual memotry)**: 机器级程序将内存视为一个非常大的字节数组，称为虚拟内存
* **地址(address)**： 内存的每个字节都由一个唯一的数字来标识，成为他的地址
* **虚拟地址空间(virtual address space)**：所有可能地址的集合就成为虚拟地址空间
  
#### 2.1.1 十六进制表示法

* 一个字节有8位，值域$0_{10} - 255_{10}$
* $x = 2^n$时,$n = i+4j$,所以开头的十六进制数字为$1(i=0),2(i=1),4(i=2),8(i=3)$,后面跟随着j个十六进制的0

#### 2.1.3 寻址和字节顺序

* 对象的地址为所使用字节中最小的地址
* **小端法(little endian)**: 最低有效字节在最前边的方式
* **大端法(big endian)**: 最高有效字节在最前边的方式(例子pg:29)
#### 2.1.4

C语言字符串被编码为一个以null(值为0)字符结尾的字符数组,eg:"12345"->"31 32 33 34 35 00"

* ASCII码:"0" -> 32 "A" -> 65 "a" -> 97

#### 2.1.4 布尔代数简介

* 非: ~ , 与: & , 或: | , 异或: ^
* 位级运算的一个常见用法是实现**掩码**运算,掩码$0xFF$表示一个字的低位字节,而其他的字节就被置为0。比如，对于$x = 0x89ABCDEF$,$x\&0xFF = 0x000000EF$

### 2.2 整数表示

#### 2.2.3 补码编码
* $TMax_w = 2^{w-1}-1$


#### 2.2.6 扩展一个数字的位表示

* **无符号数**:，在表头添加0，称为**零扩展**
* **补码数**:在表示中添加最高有效位的值，称为**符号扩展**，eg: 101->1101->11101 都表示-3

#### 2.2.7 截断数字

* **无符号数**：截断k位 $x_1 = xmod2^k$

#### 原码，反码，补码

> 示例用八位二进制的原码表示

**原码**: 最高位为符号位，0表示正数，1表示负数
* +1 = 0000 0001
* -1 = 1000 0001 
**反码**: 正数的反码是其原码本身，负数的反码是在原码的基础上，符号位不变，其余位取反
* +1 = 0000 0001
* -1 = 1111 1110
**补码**: 正数的补码是其原码本身，负数的补码是在原码的基础上，符号位不变，其余位取反后加1
* +1 = 0000 0001
* -1 = 1111 1111

计算机实际只存储补码，-128的补码是[1000 0000],所以八位的二进制数存储范围是[-128,127]

### 2.3 Interger Arithmetic(整数运算)

#### 2.3.1 Unsigned Addition

* if $ x + y_{u} > 2^{w+1} $ , $ x + y_{u} = x+y - 2^w $  
* Detecting overflow: $ s = x+y_{u} $ if $ s < x $ or $ s < y $, then the computation of s overflowed 
* Unsigned negation:$ -x_w = 2^w-x $ if $ x > 0 $ 

#### 2.3.2 Two's-Complement Addition

$$
x + y_{t} =
\begin{cases}
  x+y-2^{w}, 2^{w-1} <= x+y \\ 
  x+y \\
  x+y+2^{w},x+y<-2{w}-1
\end{cases}
$$

* Detecting positive overflow: x>0,y>0 but s<0
* Detecting negative overflow: x<0,y<0 but s>0
* Two's-Complement Negateion:
$$
-x_{t} =
\begin{cases}
  TMin_{w},x = TMinw \\
  -x, x>TMin_{w}
\end{cases}
$$

#### 2.3.6 Multiplying by Constants

* Mutiply非常耗费时间,所以通常转化为与2相乘然后进行移位操作.例如$ 14 = 2^{3} + 2^{2} + 2 $,所以$ x * 14 = x*2^{3} + x * 2^{2} + x*2 $ or ${x * 14 = x*2^{4} - x*2}  $
* 乘以$ 2_{w} $ 相当于左移w位

#### 2.3.7 Dividing by Power of 2

* Division is slower than Multiplication
* 除以$ 2^{w} $相当于右移w位 



